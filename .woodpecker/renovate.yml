when:
  event: [ push ]
  branch: [ refactor, renovate-* ]

steps:
  clone:
    image: woodpeckerci/plugin-git
    settings:
      remote: https://github.com/interactive-instruments/xtraplatform.git
      branch: master
      path: $CI_WORKSPACE/../xtraplatform

  test:
    image: openjdk:11-slim
    commands:
      - export GRADLE_USER_HOME=$${DRONE_WORKSPACE}/.gradle
      - cd ../xtraplatform
      - ./gradlew check -Pbuild-plugins=true
